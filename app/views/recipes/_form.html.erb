  <%= simple_form_for(@recipe) do |f|%>
  <%= f.input :name, label: "Name" %>
  <% @categories = Category.all %>
  <%= f.label "Choose categories:" %>
  <%= f.association :categories, collection: @categories, as: :check_boxes, class: "category-grid" %>
  <%= f.input :description, label: "Description" %>
  <h4>Ingredients</h4>
  <%= f.simple_fields_for :doses do |dose| %>
    <%= render 'dose_fields', f: dose %>
  <% end %>
  <div class="links">
    <%= link_to_add_association 'Add ingredient', f, :doses %>
  </div>
  <h4>Instructions</h4>
  <%= f.simple_fields_for :steps do |step| %>
    <%= render 'step_fields', f: step %>
  <% end %>
  <div class="links">
    <%= link_to_add_association 'Add line', f, :steps %>
  </div>
  <%= f.input :time, input_html: {class: "input-box input-box-small"},  label: "Time of preparation in minutes" %>


  <%= f.input :portions, input_html: {class: "input-box input-box-small"}, label: "Number of portions" %>

  <%= f.input :photo, input_html: { class: "inputfile", id: "upload-img", direct_upload: true }, label: "Add a photo", label_html: { class: "btn-photo" } %>
  <%#= f.input :photo, input_html: { class: "inputfile btn-photo", id: "upload_widget"} %>
  <%= f.input :photo_cache, as: :hidden %>

<%= f.submit "Save", class: "btn-show btn-green" %>
<% end %>


<!-- <button id="upload_widget" class="cloudinary-button">Upload files</button> -->

<!-- <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>

<script type="text/javascript">
var myWidget = cloudinary.createUploadWidget({
  cloudName: 'diomi9n4b',
  uploadPreset: 'recipe_widget'}, (error, result) => {
    if (!error && result && result.event === "success") {
      console.log('Done! Here is the image info: ', result.info);
    }
  }
)

document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
</script> -->
